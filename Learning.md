# What i learned from this project

### Functional Requirements for Authentication System Design

- User Registration
- Login
- Multi-Factor Authentication
- Password Recovery
- Session Managment
- Acess Control
- Audit Trail

### Non-Functional Requirements for Authentication System Design

- Security
- Scalability
- Performance
- Reliability
- Usability

### How to implement an authentication system?

1. Choose an authentification protocol (Oauth, OpenId Connect, SAML, JWT)
2. Define user models and roles
3. Implement authentication logic (registration,login,logout,password recovery, session management) should contain best practices : password hashing(bcrypt), HTTPS and SSL/TLS, generation and validation of tokens (json) and protection CSRF and XSS.
4. Conceinve the authentication user interface
5. Test and evaluate the authentication system (unit test, integration test, charge test, intrusion test, users test....)

### Authentication vs Authorization

1. Authentication is the process of verification of the user identity who wants to access to the web app.
2. Authorization is the process of determination of actions that a user can make in a web app. Generally it is implemented using RBAC(role based access control) like administrator, editor and reader. Or ABAC(attribute based access control) like age, location, date.

### Authentication methods in Web Applications

    Authentication is the process of verifying the identity of a user or information.

1. Cookie-Based Authentication:
   When the user successfully login to the web app, the server creates a session id stored in the server and returns it to the client via Set-Cookie: session=... . On the subsequent requests, the session id from the cookie is verified in the server. When you log out of the app your session id will be cleared from both client and server.

2. Token-Based Authentication:
   (Generally with JWT). When the user successfully login to the web app, the server generates a signed JWT containing all of the user information. The token is stateless, so it never gets stored on the server. On the subsequent request, the token is passed to the server and then gets decoded in order to verify it on the server.

3. Third-Party Access:

   - Via Api-token ( same as Token-Based Auth)
   - Via Open Authentication (OAuth): open protocol that allows secure authentication methods from the web,mobile,web applications.

4. OpenID
   OpenID is a protocol that uses identity provider(s) to validate a user. This allows service providers a way to achieve Single SignOn (SSO), thereby allowing users to use one set of credentials to log into several related yet independent software or systems.(Google,Facebook,Twitter,Github....)

5. Security Assertion Markup Language(SAML)
   SAML is an open standard used for authentication based on XML format. Web apps use it to transfer authentication data between two parties - the identity provider (IdP) and the service provider (SP). It provides a way to achieve SSO where the user can use the identity provider URL to log into the application, which redirects back with XML data to the application page.

### What are Access tokens?

    Access token is a code used for authenticating a web application to access specific resources.

In a token-based authentication type, access tokens (provided as JWT) are passed over the secure HTTPS protocol while in transit. When the user login, the web app receives an access token. Whenever an API is called on the app, this token will be passed as a credential.

The basic structure of a web token consist of the following parts separated by dots(.):

1.  Header: two parts: token type(like jwt) and te token signing algorithm(like SHA256).
2.  Payload: contains the claims (statements about an entity (like a user))
3.  Signature: the encoded header and payload, along with a secret, the header's algorithm comes together and signs it to create a signature.
    ex: HMACSHA256(
    base64UrlEncode(header) + "." +
    base64UrlEncode(payload),
    secret)

        Access-token:
        eyJhbGci0iJIUzI1NiIsInR5cCI6IkpXVCJ9.
        eyJzdWIi0iIxMjMONTY30DkwIiwibmFtZSI6IkpvaG4
        gRG91IiwiaXNTb2NpYWwiOnRydWV9.
        4pcPyMD0901PSyXnrXCjTwXyr4BsezdI1AVTmud2fU4

Whenever the user wants to access a rute or a ressource that's protected, the user agent send this token in the authorization header such as: Authorization: Bearer token. Bearer schema is a cryptic string usually generated by the server in response to a login request.
Next, the server will check wheter the provided access token is valid in the Authorization header.

### RESTful API?

- Representational State Transfer (REST) defines a set of standards for web services.
- An API is an interface that software programs use to communicate with each other.
- Therefore, a RESTful API is an API that conforms to the REST architectural style and constraints.
- REST system are stateless, scalable, cacheable, and have uniform interface.

### Some interesting fonts you can try

Adelle, Camphor, Grotesk, Nano ( for crypto), Vole

### Some info about implementing your own auth

- Don’t use bcrypt, use argon2. Argon2id should be the best choice for password hashing( there is also scrypt, when argon2 is not availbale)

- For session based authentication in production you use a secure, signed, httpOnly, domain root, sameSite strict (or lax if you have appropriate CORS config) cookie with a unique ID as a session identifier. It doesn’t need to be a JWT, it can be a UUID. The browser automatically sends the session cookie, it is not accessible via JavaScript. Since it is sent on every request to your domain, you will need adequate CSRF protection in this case. (csurf is deprecated) You need to make sure you re-generate the session id upon login and logout to prevent session hijacking.
